# Config common to .zshrc and .bashrc
# ex: ft=sh

alias ls='ls -v --classify --group-directories-first --color=auto'
alias ll='ls -l --all --human-readable'
alias cgrep='grep --color --binary-files=without-match --line-number --exclude=*.orig'
alias qgit='git'
alias each='for i in $(cat);'
alias sc='sudo systemctl'
alias scu='systemctl --user'

alias be='bundle exec'

# Default LESS parameters
export LESS="\
  --quit-if-one-screen \
  --no-init \
  --RAW-CONTROL-CHARS \
  --ignore-case \
  --LONG-PROMPT \
  --chop-long-lines \
  --tabs=2 \
"

# Shell history
export HISTSIZE=10000

# Editor
export VISUAL=vim
export EDITOR=vim

function source-if-exists {
  [ -f $1 ] && source $1
}

# PATH augmentation
function prepend-path {
  [ -d $1 ] && case ":${PATH:=$1}:" in
    *:$1:*) ;;
    *) PATH="$1:$PATH" ;;
  esac
}

prepend-path $HOME/bin
prepend-path $HOME/.local/bin
prepend-path /usr/local/heroku/bin

# Language managers
eval "$(rbenv init -)"
eval "$(nodenv init -)"

# Colorscheme
export BASE16_SHELL="$HOME/.config/base16-shell/base16-tomorrow.dark.sh"
source-if-exists $BASE16_SHELL

# For easy directory probing -- combines ls and less depending on the argument
function l {
  if [ $# -eq 0 ]; then
    ls
  elif [ -d "$1" ]; then
    ls $arg
  elif [ -f "$1" ]; then
    less $arg
  else
    echo "Not a directory or file: $arg" >&2
    return 1
  fi
}

function pkp {
  ps -ef | fzf --multi --header-lines=1 | awk '{ print $2 }' | xargs -t kill "$@"
}

source-if-exists $HOME/.commonrc.local
