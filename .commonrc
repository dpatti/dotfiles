# Config common to .zshrc and .bashrc
# ex: ft=sh

alias ls='ls -v --classify --group-directories-first --color=auto'
alias ll='ls -l --all --human-readable'
alias cgrep='grep --color --binary-files=without-match --line-number --exclude=*.orig'
alias qgit='git'
alias each='for i in $(cat);'
alias sc='sudo systemctl'
alias scu='systemctl --user'
alias ag='ag --smart-case --follow --pager=less'
alias be='bundle exec'

# Default LESS parameters
export LESS="\
  --quit-if-one-screen \
  --no-init \
  --RAW-CONTROL-CHARS \
  --ignore-case \
  --LONG-PROMPT \
  --chop-long-lines \
  --tabs=2 \
"

# Shell history
export HISTSIZE=10000

# Editor
export VISUAL=vim
export EDITOR=vim

function source-if-exists {
  [ -f $1 ] && source $1
}

function is-on-path {
  command "$1" 2>/dev/null
}

# PATH augmentation
function prepend-path {
  [ -d $1 ] && case ":${PATH:=$1}:" in
    *:$1:*) ;;
    *) PATH="$1:$PATH" ;;
  esac
}

prepend-path $HOME/bin
prepend-path $HOME/.local/bin
prepend-path /usr/local/heroku/bin
prepend-path $HOME/.yarn/bin

# Language managers
is-on-path rbenv && eval "$(rbenv init -)"
is-on-path rbenv && eval "$(nodenv init -)"

# Colorscheme
export BASE16_SHELL="$HOME/.config/base16-shell/base16-tomorrow.dark.sh"
source-if-exists $BASE16_SHELL

# Note to self: if the function you're writing does not have to be run at the
# shell, consider putting it in bin/ instead.
function pkp {
  ps -ef | fzf --multi --header-lines=1 | awk '{ print $2 }' | xargs -t kill "$@"
}

function words { xargs -n1 echo; }
function unwords { xargs echo; }

function reorient { cd "$(readlink -f .)"; }

source-if-exists $HOME/.commonrc.local
